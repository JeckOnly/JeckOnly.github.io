<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>路漫漫其修远兮</title><meta name="author" content="JeckOnly"><meta name="copyright" content="JeckOnly"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Live and so on">
<meta property="og:type" content="website">
<meta property="og:title" content="路漫漫其修远兮">
<meta property="og:url" content="https://jeckonly.github.io/index.html">
<meta property="og:site_name" content="路漫漫其修远兮">
<meta property="og:description" content="Live and so on">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg">
<meta property="article:author" content="JeckOnly">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://jeckonly.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '路漫漫其修远兮',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-03-05 15:45:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">41</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s3.bmp.ovh/imgs/2023/02/05/45cf91d7a460b74f.png')"><nav id="nav"><span id="blog-info"><a href="/" title="路漫漫其修远兮"><span class="site-name">路漫漫其修远兮</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">路漫漫其修远兮</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/JeckOnly" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://github.com/JeckOnly/passage" target="_blank" title="以前写博客的地方"><i class="far fa-folder-open"></i></a><a class="social-icon" href="https://space.bilibili.com/287002331" target="_blank" title="bilibili"><i class="fab fa-bilibili"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/" title="StateFlow的equality判断"><img class="post-bg" src="https://i.pinimg.com/564x/35/50/c8/3550c87198b4dfd597d699f971d2fd7d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="StateFlow的equality判断"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/" title="StateFlow的equality判断">StateFlow的equality判断</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-04T03:08:07.000Z" title="发表于 2023-03-04 11:08:07">2023-03-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-04T03:40:03.611Z" title="更新于 2023-03-04 11:40:03">2023-03-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/Flow/">Flow</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/#post-comment"><span class="waline-comment-count" id="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">前言StateFlow会对新的值和旧的值进行equality判断，如果返回true，就不会用这个new value去更新old value，就不会发送这个值。
这个equality判断会发生在 发送端 和 接收端。
发送端一般有两种发送方式，如下所示
1234567891011121314151617181920212223fun main() = runBlocking &#123;  val mutableStateFlow = MutableStateFlow&lt;Person&gt;(Person())    launch &#123;        delay(1000)        println(&quot;用update的方式更改值（equal返回true）&quot;)        mutableStateFlow.update &#123;// 1 CAS校验 + 相等性判断，推荐使用            Person(&quot;&quot;, 0)        &#125;        delay(1000)        println(&quot ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/" title="select优先选择第一个可用的clause"><img class="post-bg" src="https://i.pinimg.com/564x/a5/11/e2/a511e2a67cd46781690060abbed5f6c3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="select优先选择第一个可用的clause"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/" title="select优先选择第一个可用的clause">select优先选择第一个可用的clause</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-03T12:44:48.000Z" title="发表于 2023-03-03 20:44:48">2023-03-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-03T13:43:12.790Z" title="更新于 2023-03-03 21:43:12">2023-03-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/#post-comment"><span class="waline-comment-count" id="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">when more than one clause are ready, select will choose the first one. Pls take a look at the code below:
12345678910111213141516171819202122232425262728293031323334suspend fun selectAorB(a: ReceiveChannel&lt;String&gt;, b: ReceiveChannel&lt;String&gt;): String =    select&lt;String&gt; &#123;        a.onReceiveCatching &#123; it -&gt;            val value = it.getOrNull()            if (value != null) &#123;                &quot;a -&gt; &#x27;$value&#x27;&quot;            &#125; else &#123;     ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/" title="channelFlow的并发emit"><img class="post-bg" src="https://i.pinimg.com/564x/d6/c3/98/d6c39875f9444cce60c3f5be676abdbf.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="channelFlow的并发emit"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/" title="channelFlow的并发emit">channelFlow的并发emit</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-02T12:21:18.000Z" title="发表于 2023-03-02 20:21:18">2023-03-02</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-02T15:34:06.451Z" title="更新于 2023-03-02 23:34:06">2023-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/Flow/">Flow</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/#post-comment"><span class="waline-comment-count" id="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">12345678910111213fun main() = runBlocking &#123;    channelFlow&lt;Int&gt; &#123;        withContext(Dispatchers.IO) &#123;            send(1)// send而不是flow        &#125;        withContext(Dispatchers.Default) &#123;            send(2)        &#125;    &#125;.map &#123; it * 2 &#125;        .collect &#123;            println(it)        &#125;&#125;

使用channelFlow可以在不同的上下文中发射值。
用 flow&#123;&#125; 构建器则不行，代码如下
123456789101112fun main() = runBlocking &#123;    flow&lt;Int&gt; &#123;        withCont ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/01/%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%93%E8%B6%8A/" title="你不需要变得卓越"><img class="post-bg" src="https://i.pinimg.com/564x/da/c6/bc/dac6bc8e5b931135dffb34b4654f9142.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="你不需要变得卓越"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/01/%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%93%E8%B6%8A/" title="你不需要变得卓越">你不需要变得卓越</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-01T09:54:35.000Z" title="发表于 2023-03-01 17:54:35">2023-03-01</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-01T10:18:08.483Z" title="更新于 2023-03-01 18:18:08">2023-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/life/">life</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/01/%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%93%E8%B6%8A/#post-comment"><span class="waline-comment-count" id="/2023/03/01/%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%93%E8%B6%8A/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
“All I know is I’m losing my mind,” Franny said. “I’m just sick of ego, ego, ego. My own and everybody else’s. I’m sick of everybody that wants to get somewhere, do something distinguished and all, be somebody interesting. It’s disgusting - it is, it is. I don’t care what anybody says . . .  I’m not afraid to compete. It’s just the opposite. Don’t you see that? I’m afraid I will compete - that’s what scares me. That’s why I quit the Theater Department. Just because I’m so horribly conditioned t ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/01/%E7%88%B1%E6%83%85%E5%A6%82%E4%BD%95%E6%8C%81%E4%B9%85%E5%8C%96/" title="爱情如何持久化"><img class="post-bg" src="https://i.pinimg.com/564x/dc/32/38/dc3238bf8a7460e000034cb93a7658cd.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="爱情如何持久化"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/01/%E7%88%B1%E6%83%85%E5%A6%82%E4%BD%95%E6%8C%81%E4%B9%85%E5%8C%96/" title="爱情如何持久化">爱情如何持久化</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-01T01:49:22.000Z" title="发表于 2023-03-01 09:49:22">2023-03-01</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-01T02:36:49.536Z" title="更新于 2023-03-01 10:36:49">2023-03-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/life/">life</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/01/%E7%88%B1%E6%83%85%E5%A6%82%E4%BD%95%E6%8C%81%E4%B9%85%E5%8C%96/#post-comment"><span class="waline-comment-count" id="/2023/03/01/%E7%88%B1%E6%83%85%E5%A6%82%E4%BD%95%E6%8C%81%E4%B9%85%E5%8C%96/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
爱是一种需求，一种渴望，是探寻生命中最大奖赏的驱动力。——海伦·费希尔，生物人类学家

我认为要探求情感的本质，很大程度上还是靠精神分析学和脑生理学。前者探寻为什么一个人要拥有这样那样的情感，后者揭示情感如何工作。
生理学家认为，爱情初期的激情和所谓坠入爱河的感觉，来源于奖赏预测误差带来的丰富的多巴胺。而多巴胺又驱使着人们去追求新鲜，追求更多。
多巴胺是面向未来的，但大脑中也有另外一种被称为“当下分子”的物质，它让人们产生满足感，即那种“活在当下”的感觉。爱情持久化的关键在于如何让感情从“多巴胺驱动”转变为“当下分子驱动”。
似乎这与基因有关，一个“”多巴胺能“丰富的人，生活中一般更有激情，更不容易满足，在爱情上，往往关系都不会长久，在12-18个月的激情期消退之后，当下的感情已没有新鲜感了。大脑告诉他，你已经对Ta没有感觉了，是时候寻找一个有感觉的人。于是一个新的 loop 开始。

从多巴胺的角度来说，拥有是无趣的，只有获得才有趣。如果你生活在桥下，多巴胺会让你想获得一顶帐篷。如果你生活在帐篷里，多巴胺就会让你想获得一栋房子。如果你住在世界上最贵的豪宅中，多巴胺会让你想获得月球上 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/28/%E3%80%8A%E6%98%A5%E5%85%89%E4%B9%8D%E6%B3%84%E3%80%8B%E6%9C%89%E6%84%9F/" title="《春光乍泄》有感"><img class="post-bg" src="https://i.pinimg.com/564x/51/aa/f8/51aaf8f717d5a50fad070bd5c726be63.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《春光乍泄》有感"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/28/%E3%80%8A%E6%98%A5%E5%85%89%E4%B9%8D%E6%B3%84%E3%80%8B%E6%9C%89%E6%84%9F/" title="《春光乍泄》有感">《春光乍泄》有感</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-28T01:52:14.000Z" title="发表于 2023-02-28 09:52:14">2023-02-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-28T02:18:42.611Z" title="更新于 2023-02-28 10:18:42">2023-02-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%94%B5%E5%BD%B1/">电影</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/02/28/%E3%80%8A%E6%98%A5%E5%85%89%E4%B9%8D%E6%B3%84%E3%80%8B%E6%9C%89%E6%84%9F/#post-comment"><span class="waline-comment-count" id="/2023/02/28/%E3%80%8A%E6%98%A5%E5%85%89%E4%B9%8D%E6%B3%84%E3%80%8B%E6%9C%89%E6%84%9F/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">《春光乍泄》的英文名叫《Happy together》,但昨晚看完之后，happy的场景其实是不多的。影片一开始就是两个人在去瀑布的路上迷路，然后争吵分手了。后来何宝荣被打伤，回来找黎耀辉，两个人在一间小房子里度过了一段时光。但何宝荣终究是不安分的人，两个人再次分开。最后黎耀辉回到香港，何宝荣回到当时两个人呆过的小房子，搂着萦绕着黎的气息的被子痛哭。
我一开始就觉得它们两个人不搭，所以对后面何离开黎，以及它们最后没有在一起没有什么惊讶。
觉得它们不可能在一起是因为我看出来它们性格不相容。在去找瀑布的路上，车子坏了。
黎呛何说：“又说会看地图，走错路了！”
何本来躺在后座：“走错路用不着死吧？走错路不就掉头。”
车子发动不起来。
黎：“操！买什么汽车，搭巴士不好好的吗！这废铁还打不着火！你来开吧！”
何：“有废铁好过没有，我们现在很有钱吗？有车可以坐好过挤巴士吧！三十多个小时！”
黎：“旅行就是这样的啦！”
何：“我可没想过是这样子”
他们是两个性格的人，黎喜欢有计划，有方向的去做事情，而何倾向于顺其自然，随心地自由自在地；黎比较传统，辛苦一点也没什么。而何不太能吃苦，喜欢更舒服的sty ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/27/%E5%85%B3%E9%94%AE%E5%AD%97tailrec/" title="关键字tailrec"><img class="post-bg" src="https://i.pinimg.com/564x/f4/a8/78/f4a87820f6bfc33e58785043417462f6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关键字tailrec"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/27/%E5%85%B3%E9%94%AE%E5%AD%97tailrec/" title="关键字tailrec">关键字tailrec</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-27T05:38:01.000Z" title="发表于 2023-02-27 13:38:01">2023-02-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-27T05:42:25.385Z" title="更新于 2023-02-27 13:42:25">2023-02-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E8%AF%AD%E6%B3%95/">语法</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/02/27/%E5%85%B3%E9%94%AE%E5%AD%97tailrec/#post-comment"><span class="waline-comment-count" id="/2023/02/27/%E5%85%B3%E9%94%AE%E5%AD%97tailrec/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">chatgpt:
Kotlin中的tailrec是一个修饰符，用于声明一个递归函数，告诉编译器将其转化为尾递归函数。尾递归是一种特殊的递归形式，在每个递归调用的结尾处只返回函数本身，不再执行任何其他操作。使用尾递归可以避免栈溢出问题，因为编译器可以对尾递归进行优化，将其转换为迭代形式，从而节省了函数调用堆栈的空间。
使用tailrec的要求：

函数必须是递归函数；
递归调用必须是函数体中的最后一个操作。

下面是一个使用tailrec的示例：
123kotlinCopy codetailrec fun factorial(n: Int, acc: Int = 1): Int =    if (n &lt;= 1) acc    else factorial(n - 1, acc * n)

在上面的示例中，函数factorial是一个尾递归函数。通过将递归调用放在函数体的最后一个操作，使用tailrec修饰符可以告诉编译器将其优化为迭代形式，避免了函数调用堆栈的溢出问题。
总之，tailrec修饰符适用于一些需要进行递归操作的函数，可以避免递归调用堆栈溢出的问题。但要注意，tailr ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/02/27/ViewModel-cheatsheet/" title="ViewModel_cheatsheet">ViewModel_cheatsheet</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-27T03:10:20.000Z" title="发表于 2023-02-27 11:10:20">2023-02-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-27T04:41:21.037Z" title="更新于 2023-02-27 12:41:21">2023-02-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Android/%E6%9E%B6%E6%9E%84/">架构</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Android/%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6/">架构组件</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/02/27/ViewModel-cheatsheet/#post-comment"><span class="waline-comment-count" id="/2023/02/27/ViewModel-cheatsheet/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
保存一下链接
cheat sheet
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/25/%E5%8E%BB%E5%B9%B4%E6%98%A5%E5%A4%A9%E7%9A%84%E9%98%B4%E9%9C%BE/" title="去年春天的阴霾"><img class="post-bg" src="https://i.pinimg.com/564x/7a/ac/95/7aac951fc35b2271e562ab8086f31d73.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="去年春天的阴霾"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/25/%E5%8E%BB%E5%B9%B4%E6%98%A5%E5%A4%A9%E7%9A%84%E9%98%B4%E9%9C%BE/" title="去年春天的阴霾">去年春天的阴霾</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-25T02:39:32.000Z" title="发表于 2023-02-25 10:39:32">2023-02-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-25T03:09:39.158Z" title="更新于 2023-02-25 11:09:39">2023-02-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/life/">life</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/02/25/%E5%8E%BB%E5%B9%B4%E6%98%A5%E5%A4%A9%E7%9A%84%E9%98%B4%E9%9C%BE/#post-comment"><span class="waline-comment-count" id="/2023/02/25/%E5%8E%BB%E5%B9%B4%E6%98%A5%E5%A4%A9%E7%9A%84%E9%98%B4%E9%9C%BE/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">我不想去写，但有这个必要去回忆。
在《东邪西毒》开头，张国荣饰演的欧阳锋有一句台词：看来你的年纪也有四十出头了，这四十多年来，总有些事你是不愿再提，或是有些人你不想再见，有的人曾经对不起你。
其实不用四十出头，从十多岁开始，每个人都有一些纠葛的事，不愿想起来。可越是不想回忆起来，就越难以忘记。欧阳锋喝了醉生梦死尚且忘不了，何况我今天没喝酒。只喝了一瓶250ml的纯牛奶。
那是去年春天的事，差不多上一年的这个时候。我去到一个陌生的环境，但不得不去适应它。我以为我对我的情绪和行为控制良好，但每过一段时间去看，都是漏洞百出，里面满是焦虑不安，自卑怨恨，和爱的人的争执。不用说，伤害她已是一个事实，她没忘记，我也没忘记。
其实还有一些人，当初也是把酒言欢。但就像我许久不肯面对当初的我一般，渐渐没了联系。我也不清楚是不是仅仅没联系我，如果是的话，反而能让我接受，的确做了一些幼稚的事情。
”每个人都会经过这个阶段，见到一座山，就想知道山后面是什么。我很想告诉他，可能翻过山后面，你会发现没什么特别。回望之下，可能会觉得这一边更好。“
去年春天的山，到底有没有翻过去，在现在看来，是没有的。或许在以后会发 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/02/24/Android%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%86%B5/" title="Android存储系统概况"><img class="post-bg" src="https://i.pinimg.com/736x/00/ac/b7/00acb7d613f2539c4265882507b7b167.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Android存储系统概况"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/02/24/Android%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%86%B5/" title="Android存储系统概况">Android存储系统概况</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-24T07:29:57.000Z" title="发表于 2023-02-24 15:29:57">2023-02-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-26T00:58:01.131Z" title="更新于 2023-02-26 08:58:01">2023-02-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Android/%E5%BA%94%E7%94%A8%E6%95%B0%E6%8D%AE%E5%92%8C%E6%96%87%E4%BB%B6/">应用数据和文件</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/02/24/Android%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%86%B5/#post-comment"><span class="waline-comment-count" id="/2023/02/24/Android%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%A6%82%E5%86%B5/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">在api 28 29 30 31 33都进行测试过。
&#x2F;是根目录

&#x2F;data&#x2F;data&#x2F;com.xxx.xxx&#x2F;…
首先 &#x2F;sdcard&#x2F;、&#x2F;storage&#x2F;self&#x2F;primary&#x2F; 真正指向的是&#x2F;storage&#x2F;emulated&#x2F;0&#x2F;，所以用x表示这三者。x&#x2F;Android&#x2F;data&#x2F;com.xxx.xxx&#x2F;…
x&#x2F;[DCIM, Alarm, Pictures]
x下其他目录，比如  x&#x2F;qq

1、2都是特定应用的，特点是路径有包名。这两个目录本App无需申请访问权限即可申请，其它App也无法访问本App的目录。
1称为 internal storage，2称为 external storage的应用专属目录。
3我称之为 external public storage。
4称之为其他目录
1、2不受分区存储影响。
4我不会。
在本文就研究对于3受分区存储的影响（表现在9 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JeckOnly</div><div class="author-info__description">Live and so on</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">41</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/JeckOnly"><i class="fab fa-github"></i><span>Click here</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/JeckOnly" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://github.com/JeckOnly/passage" target="_blank" title="以前写博客的地方"><i class="far fa-folder-open"></i></a><a class="social-icon" href="https://space.bilibili.com/287002331" target="_blank" title="bilibili"><i class="fab fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">以前的技术博客在上面文件夹按钮进入。评论需要VPN。</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/" title="StateFlow的equality判断"><img src="https://i.pinimg.com/564x/35/50/c8/3550c87198b4dfd597d699f971d2fd7d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="StateFlow的equality判断"/></a><div class="content"><a class="title" href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/" title="StateFlow的equality判断">StateFlow的equality判断</a><time datetime="2023-03-04T03:08:07.000Z" title="发表于 2023-03-04 11:08:07">2023-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/" title="select优先选择第一个可用的clause"><img src="https://i.pinimg.com/564x/a5/11/e2/a511e2a67cd46781690060abbed5f6c3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="select优先选择第一个可用的clause"/></a><div class="content"><a class="title" href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/" title="select优先选择第一个可用的clause">select优先选择第一个可用的clause</a><time datetime="2023-03-03T12:44:48.000Z" title="发表于 2023-03-03 20:44:48">2023-03-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/" title="channelFlow的并发emit"><img src="https://i.pinimg.com/564x/d6/c3/98/d6c39875f9444cce60c3f5be676abdbf.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="channelFlow的并发emit"/></a><div class="content"><a class="title" href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/" title="channelFlow的并发emit">channelFlow的并发emit</a><time datetime="2023-03-02T12:21:18.000Z" title="发表于 2023-03-02 20:21:18">2023-03-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/01/%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%93%E8%B6%8A/" title="你不需要变得卓越"><img src="https://i.pinimg.com/564x/da/c6/bc/dac6bc8e5b931135dffb34b4654f9142.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="你不需要变得卓越"/></a><div class="content"><a class="title" href="/2023/03/01/%E4%BD%A0%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%93%E8%B6%8A/" title="你不需要变得卓越">你不需要变得卓越</a><time datetime="2023-03-01T09:54:35.000Z" title="发表于 2023-03-01 17:54:35">2023-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/01/%E7%88%B1%E6%83%85%E5%A6%82%E4%BD%95%E6%8C%81%E4%B9%85%E5%8C%96/" title="爱情如何持久化"><img src="https://i.pinimg.com/564x/dc/32/38/dc3238bf8a7460e000034cb93a7658cd.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="爱情如何持久化"/></a><div class="content"><a class="title" href="/2023/03/01/%E7%88%B1%E6%83%85%E5%A6%82%E4%BD%95%E6%8C%81%E4%B9%85%E5%8C%96/" title="爱情如何持久化">爱情如何持久化</a><time datetime="2023-03-01T01:49:22.000Z" title="发表于 2023-03-01 09:49:22">2023-03-01</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E5%BA%94%E7%94%A8%E6%95%B0%E6%8D%AE%E5%92%8C%E6%96%87%E4%BB%B6/"><span class="card-category-list-name">应用数据和文件</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E6%9E%B6%E6%9E%84/"><span class="card-category-list-name">架构</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6/"><span class="card-category-list-name">架构组件</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E5%B9%B6%E5%8F%91/"><span class="card-category-list-name">并发</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/"><span class="card-category-list-name">Jetpack</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/Compose/"><span class="card-category-list-name">Compose</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/Compose/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6/"><span class="card-category-list-name">自定义组件</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/"><span class="card-category-list-name">Kotlin</span><span class="card-category-list-count">12</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/"><span class="card-category-list-name">协程</span><span class="card-category-list-count">11</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/Flow/"><span class="card-category-list-name">Flow</span><span class="card-category-list-count">4</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E8%AF%AD%E6%B3%95/"><span class="card-category-list-name">语法</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/leetcode/"><span class="card-category-list-name">leetcode</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/life/"><span class="card-category-list-name">life</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BA%93/"><span class="card-category-list-name">库</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BA%93/Moshi/"><span class="card-category-list-name">Moshi</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%B8%B8%E6%88%8F/"><span class="card-category-list-name">游戏</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%B5%E5%BD%B1/"><span class="card-category-list-name">电影</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E6%84%9F%E6%83%B3/"><span class="card-category-list-name">编程感想</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/"><span class="card-category-list-name">读书</span><span class="card-category-list-count">4</span></a></li>
            </ul></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">36</span></a></li></ul></div><div class="card-widget card-map"><div class="card-content"><div class="item-headline"><i class="fa fa-map-marker" aria-hidden="true"></i><span>访客</span></div><a target="_blank" rel="noopener" href="https://clustrmaps.com/site/1bswl"><img src="//www.clustrmaps.com/map_v2.png?d=7LOJqlmkafuJYaI8Avy1X9bjNH8SWxAFgbzbu8B9Dp4&amp;cl=ffffff"/></a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">41</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-12-31T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">32.2k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-03-05T07:45:30.633Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By JeckOnly</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">路漫漫其修远兮</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  function loadWaline () {
    function initWaline () {
      let initData = {
        el: null,
        serverURL: 'https://vercel-mu-opal.vercel.app',
        comment: true
      }
      const waline = Waline.init(initData)
    }

    if (typeof Waline === 'object') initWaline() 
    else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(initWaline)
  }

  window.pjax ? loadWaline() : window.addEventListener('load', loadWaline)
})()</script><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["大多数人都为别人对自己的看法所困扰：我们努力工作，首先是为了赢得别人的赞赏，然后是避免失去这种赞赏。"])
  } else {
    document.getElementById("subtitle").innerHTML = '大多数人都为别人对自己的看法所困扰：我们努力工作，首先是为了赢得别人的赞赏，然后是避免失去这种赞赏。'
  }
}
typedJSFn.run(subtitleType)</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const loadWaline = () => {
      Waline.RecentComments({
        serverURL: 'https://vercel-mu-opal.vercel.app',
        count: 6
      }).then(({comments}) => {
        const walineArray = comments.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.insertedAt,
          }
        })
        saveToLocal.set('waline-newest-comments', JSON.stringify(walineArray), 10/(60*24))
        generateHtml(walineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
    }

    if (typeof Waline === 'object') loadWaline()
    else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(loadWaline)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('waline-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="理性,愉悦,安宁" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>