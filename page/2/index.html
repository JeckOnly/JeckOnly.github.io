<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>路漫漫其修远兮</title><meta name="author" content="JeckOnly"><meta name="copyright" content="JeckOnly"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Live and so on">
<meta property="og:type" content="website">
<meta property="og:title" content="路漫漫其修远兮">
<meta property="og:url" content="https://jeckonly.github.io/page/2/index.html">
<meta property="og:site_name" content="路漫漫其修远兮">
<meta property="og:description" content="Live and so on">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg">
<meta property="article:author" content="JeckOnly">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://jeckonly.github.io/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '路漫漫其修远兮',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-11-12 17:48:59'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s3.bmp.ovh/imgs/2023/02/05/45cf91d7a460b74f.png')"><nav id="nav"><span id="blog-info"><a href="/" title="路漫漫其修远兮"><span class="site-name">路漫漫其修远兮</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">路漫漫其修远兮</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/JeckOnly" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://github.com/JeckOnly/passage" target="_blank" title="以前写博客的地方"><i class="far fa-folder-open"></i></a><a class="social-icon" href="https://space.bilibili.com/287002331" target="_blank" title="bilibili"><i class="fab fa-bilibili"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/13/%E6%87%92%E6%83%B0%E6%98%AF%E4%B8%80%E9%A1%B9%E8%89%B0%E8%8B%A6%E7%9A%84%E5%B7%A5%E4%BD%9C-%E6%91%98%E6%8A%84/" title="懒惰是一项艰苦的工作 摘抄"><img class="post-bg" src="https://i.pinimg.com/564x/ea/77/79/ea77798d6fcf744cdf72bc1b22a685dc.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="懒惰是一项艰苦的工作 摘抄"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/13/%E6%87%92%E6%83%B0%E6%98%AF%E4%B8%80%E9%A1%B9%E8%89%B0%E8%8B%A6%E7%9A%84%E5%B7%A5%E4%BD%9C-%E6%91%98%E6%8A%84/" title="懒惰是一项艰苦的工作 摘抄">懒惰是一项艰苦的工作 摘抄</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-13T12:41:31.000Z" title="发表于 2023-03-13 20:41:31">2023-03-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-13T12:44:55.419Z" title="更新于 2023-03-13 20:44:55">2023-03-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/life/">life</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/13/%E6%87%92%E6%83%B0%E6%98%AF%E4%B8%80%E9%A1%B9%E8%89%B0%E8%8B%A6%E7%9A%84%E5%B7%A5%E4%BD%9C-%E6%91%98%E6%8A%84/#post-comment"><span class="waline-comment-count" id="/2023/03/13/%E6%87%92%E6%83%B0%E6%98%AF%E4%B8%80%E9%A1%B9%E8%89%B0%E8%8B%A6%E7%9A%84%E5%B7%A5%E4%BD%9C-%E6%91%98%E6%8A%84/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">At times, perhaps without quite knowing why, we slip into a resolutely ‘lazy’ mood.有时，也许不知道为什么，我们会陷入一种坚决的“懒惰”情绪。
We’re simply not able to write anything new or can’t face setting up more meetings.我们根本无法写任何新东西，或者无法面对召开更多会议。
We don’t want to clean the fridge or go out to befriend prospective clients. All we我们不想清洁冰箱或出去结交潜在客户。
have an appetite for, it seems, is to loll on the sofa and maybe dip randomly into a看起来，我们唯一的胃口就是懒洋洋地躺在沙发上，随意翻阅一
book, wander down to the shops and buy a packet of biscuits or ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/13/Consuming-flows-safely-in-Jetpack-Compose-%E7%AC%94%E8%AE%B0/" title="Consuming flows safely in Jetpack Compose 笔记"><img class="post-bg" src="https://i.pinimg.com/564x/cf/e2/ce/cfe2cef9aa02316c01208be8f60205f8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Consuming flows safely in Jetpack Compose 笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/13/Consuming-flows-safely-in-Jetpack-Compose-%E7%AC%94%E8%AE%B0/" title="Consuming flows safely in Jetpack Compose 笔记">Consuming flows safely in Jetpack Compose 笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-13T04:33:36.000Z" title="发表于 2023-03-13 12:33:36">2023-03-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-13T04:53:35.217Z" title="更新于 2023-03-13 12:53:35">2023-03-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Jetpack/">Jetpack</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Jetpack/Compose/">Compose</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Jetpack/Compose/Flow%E7%9B%B8%E5%85%B3/">Flow相关</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/13/Consuming-flows-safely-in-Jetpack-Compose-%E7%AC%94%E8%AE%B0/#post-comment"><span class="waline-comment-count" id="/2023/03/13/Consuming-flows-safely-in-Jetpack-Compose-%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">本文代码
对比 collectAsState 和 collectAsStateWithLifecycle




collectAsState
collectAsStateWithLifecycle



不同点
没有生命周期感知，在App退到后台依然保持对流的 订阅 状态
在App退到后台退出对流的 订阅 状态


应用场景
在Android开发上不建议使用，以后Compose面向多平台可能会使用。
替代 collectAdState 用于转换 Flow 和 State


测试一下，令 StateFlow 在 最后一个订阅者 消失之后 stop the sharing coroutine
1234567val numberFlow: StateFlow&lt;Int&gt; = mutableNumberFlow.onEach &#123;        LogUtil.d(&quot;ViewModel的StateFlow： $it&quot;)// 1    &#125;.stateIn(        scope = viewModelScope.plus(Dispatche ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/03/12/Gradle%E4%BE%9D%E8%B5%96%E7%9A%84%E7%BB%93%E6%9E%84-by-chatgpt/" title="Gradle依赖的结构 by chatgpt">Gradle依赖的结构 by chatgpt</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-12T02:54:22.000Z" title="发表于 2023-03-12 10:54:22">2023-03-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-12T02:57:52.740Z" title="更新于 2023-03-12 10:57:52">2023-03-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Gradle/">Gradle</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/12/Gradle%E4%BE%9D%E8%B5%96%E7%9A%84%E7%BB%93%E6%9E%84-by-chatgpt/#post-comment"><span class="waline-comment-count" id="/2023/03/12/Gradle%E4%BE%9D%E8%B5%96%E7%9A%84%E7%BB%93%E6%9E%84-by-chatgpt/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">问：请分析implementation(“androidx.core:core-ktx:1.0.0”)的各个部分的结构和含义
答：
implementation(&quot;androidx.core:core-ktx:1.0.0&quot;) 是 Gradle 依赖声明的语法，由以下几个部分组成：

implementation：表示依赖的配置类型，表示依赖将被添加到实现中而不是编译或测试。
&quot;androidx.core:core-ktx:1.0.0&quot;：表示依赖的坐标（coordinates），由三部分组成，以冒号 : 分隔：
androidx.core：表示依赖的组名（group），即库所属的组织或项目。
core-ktx：表示依赖的模块名（module），即库的具体功能。
1.0.0：表示依赖的版本号（version），指定库的版本。



因此，implementation(&quot;androidx.core:core-ktx:1.0.0&quot;) 的含义是将 androidx.core:core-ktx:1.0.0 这个库添加到项目的实现配置中。该 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/10/Kotlin%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0/" title="Kotlin类型系统笔记"><img class="post-bg" src="https://i.pinimg.com/564x/f2/39/52/f239521b59bcd63b050a3d1bd698d904.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kotlin类型系统笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/10/Kotlin%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0/" title="Kotlin类型系统笔记">Kotlin类型系统笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-10T03:03:36.000Z" title="发表于 2023-03-10 11:03:36">2023-03-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-10T04:27:43.305Z" title="更新于 2023-03-10 12:27:43">2023-03-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/">类型系统</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/10/Kotlin%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0/#post-comment"><span class="waline-comment-count" id="/2023/03/10/Kotlin%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">存在String，其实不存在String？这个类，这是编译器做的功课。所以？可空类型的类型系统是隐含的。Unit也是被编译器特殊对待的，Unit作为函数返回值的话，可以不用显式返回。
Unit 和 Nothing 填补了原本 Java 当中的类型系统，让 Kotlin 的类型系统更加全面，也让大部分的“语句”可以当作“表达式”来用。
子类是从父类继承属性和方法的一个类，而继承则是实现这种子类和父类之间的关系的一种方式，它只是一种方式。String和String？是父子类关系，但不是用继承来实现的，而是靠编译器。

从Java过来Kotlin，会有一种思维，以Java的眼光来看Kotlin的类型系统，去想这个Kotlin类在Java中代表了什么。
现在我认为这是不必要的。Kotlin的抽象性，新的类型系统正是让开发者更好地写代码。它们之间的对照关系、翻译关系，了解即可。写代码时要想着Kotlin的类型系统。


AnyAny?可以看作Any的父类，虽然它们之间没有继承关系。在Kotlin基于JVM系统中，Any会被翻译为Object并根据有无“?”来加上 @Nullable或 @NotN ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/10/Note-about-meditation-speech-by-huberman/" title="Note about meditation speech by huberman"><img class="post-bg" src="https://i.pinimg.com/564x/3b/3b/cd/3b3bcd8e074213c4f0c7de4696e57736.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Note about meditation speech by huberman"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/10/Note-about-meditation-speech-by-huberman/" title="Note about meditation speech by huberman">Note about meditation speech by huberman</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-10T01:50:05.000Z" title="发表于 2023-03-10 09:50:05">2023-03-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-10T01:51:40.410Z" title="更新于 2023-03-10 09:51:40">2023-03-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/life/">life</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/10/Note-about-meditation-speech-by-huberman/#post-comment"><span class="waline-comment-count" id="/2023/03/10/Note-about-meditation-speech-by-huberman/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">prefrontal cortex interpret things， can interpret what is going on in ACC（ACC accepts body signals）
A paper called A Wandering Mind Is An Unhappy Mindstimulus-indipendent thoughts — defualt mode network“In conclusion, a human mind is a wandering mind, and a wandering mind is an unhappy mind. The ability to think about what is not happening (in a moment), is a cognitive achievement that comes at an emotional cost. “
闭上眼睛，去进行主观判断，自己现在的attention是更偏向内在还是外在，然后进行不同冥想练习的选择。Youtuber推荐进行和当下更容易做到的相反的方向的冥想 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/06/Roman-Elizarov%E7%9A%84%E8%AE%B2%E5%BA%A7%E7%AC%94%E8%AE%B0/" title="Roman Elizarov的讲座笔记"><img class="post-bg" src="https://i.pinimg.com/736x/f7/ba/3b/f7ba3b4b4684f5ecaa73d1ac48b70a64.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Roman Elizarov的讲座笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/06/Roman-Elizarov%E7%9A%84%E8%AE%B2%E5%BA%A7%E7%AC%94%E8%AE%B0/" title="Roman Elizarov的讲座笔记">Roman Elizarov的讲座笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-06T02:16:22.000Z" title="发表于 2023-03-06 10:16:22">2023-03-06</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-07T14:28:35.702Z" title="更新于 2023-03-07 22:28:35">2023-03-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/06/Roman-Elizarov%E7%9A%84%E8%AE%B2%E5%BA%A7%E7%AC%94%E8%AE%B0/#post-comment"><span class="waline-comment-count" id="/2023/03/06/Roman-Elizarov%E7%9A%84%E8%AE%B2%E5%BA%A7%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">被C#启发在C#中，用async和await关键字可以实现挂起和恢复，因而Kt协程的原型像下面这样

后来发现没必要使用这两个关键字——async , await，直接用一个 suspend 关键字代替就好了啊。但是团队一开始还不太敢这么做，因为很多其他受到C#的 async await启发的并发结构都没有这样做——在外观上取消了普通函数和挂起函数的差异，直到Go语言的出现让它们坚定了自己的想法。
from Go 1从Go中学到了很多，比如 delay，launch都在Go中有类似的表达。
和Go的不同，UI编程如何搞一开始的原型是有这么一个函数
1234launchUI&#123;// invoke suspend function here&#125;

后来抽象出了 CoroutineContext
123launch(UI) &#123; // invoke suspend function here&#125;

不是新创建一个函数，而是通过参数的方式指定 上下文。
取消机制C#和Go都需要为取消行为显式地写很多样板代码。Kotlin想避免这一点。
不同于Go，要显式地传递c ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/05/%E6%9C%80%E7%BE%8E%E5%A5%BD%E7%9A%84%E5%B9%B4%E5%8D%8E%E4%B8%8E%E6%9C%80%E7%B3%9F%E7%B3%95%E7%9A%84%E7%88%B1%E6%83%85/" title="最美好的年华与最糟糕的爱情"><img class="post-bg" src="https://i.pinimg.com/564x/5d/c5/e8/5dc5e866bea27cdd3349ae6dc7267d4f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="最美好的年华与最糟糕的爱情"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/05/%E6%9C%80%E7%BE%8E%E5%A5%BD%E7%9A%84%E5%B9%B4%E5%8D%8E%E4%B8%8E%E6%9C%80%E7%B3%9F%E7%B3%95%E7%9A%84%E7%88%B1%E6%83%85/" title="最美好的年华与最糟糕的爱情">最美好的年华与最糟糕的爱情</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-05T05:39:05.000Z" title="发表于 2023-03-05 13:39:05">2023-03-05</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-05T07:48:19.004Z" title="更新于 2023-03-05 15:48:19">2023-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%94%B5%E5%BD%B1/">电影</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/05/%E6%9C%80%E7%BE%8E%E5%A5%BD%E7%9A%84%E5%B9%B4%E5%8D%8E%E4%B8%8E%E6%9C%80%E7%B3%9F%E7%B3%95%E7%9A%84%E7%88%B1%E6%83%85/#post-comment"><span class="waline-comment-count" id="/2023/03/05/%E6%9C%80%E7%BE%8E%E5%A5%BD%E7%9A%84%E5%B9%B4%E5%8D%8E%E4%B8%8E%E6%9C%80%E7%B3%9F%E7%B3%95%E7%9A%84%E7%88%B1%E6%83%85/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">同许多人一样，最初对这部电影产生兴趣，是想欣赏张曼玉在影片里穿着各款旗袍袅袅婷婷走过去的身姿。然而影片看到一半，便不得不重新定位王家卫频频拍摄的这一组镜头的作用，它是一道鲜明有力的色彩，却也只是色彩，它的存在与电影中压抑的大提琴音乐一样，都是为突显这样一个主题：最美好的年华与最糟糕的爱情。
  上个世纪六十年代的环境，中产阶级的背景，小资格调的情境。  苏丽珍的职业是秘书，她懂得享受生活，有精致的妆容，一丝不苟的云鬓，26身旗袍在剧中未曾重复出现过。即便是去买面，她也会打扮得精致从容，对生活的态度始终认真，甚至有近乎苛刻的完美主义倾向。  周慕云是报社的编辑，喜欢自己的工作，待人彬彬有礼。与苏丽珍一样喜欢武侠小说，但在苏丽珍的鼓励之前，从未尝试过自己书写。  他们各自有各自的家庭，只是偶然的原因，成了隔壁的邻居。
  在这里要谈到王家卫对于“不在场的在场”演绎。影片中塑造了始终未曾露面的两个人，苏丽珍的丈夫，周慕云的太太。苏的丈夫经常出国去日本，年轻有为；周的太太的酒店上班，经常上夜班，年轻貌美。影片多次借助他人转达话语的场景，暗示观众，在苏与周频频碰面的同时，另外的两个人也定是如此， ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/" title="StateFlow的equality判断"><img class="post-bg" src="https://i.pinimg.com/564x/35/50/c8/3550c87198b4dfd597d699f971d2fd7d.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="StateFlow的equality判断"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/" title="StateFlow的equality判断">StateFlow的equality判断</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-04T03:08:07.000Z" title="发表于 2023-03-04 11:08:07">2023-03-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-04T03:40:03.611Z" title="更新于 2023-03-04 11:40:03">2023-03-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/Flow/">Flow</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/#post-comment"><span class="waline-comment-count" id="/2023/03/04/StateFlow%E7%9A%84equality%E5%88%A4%E6%96%AD/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">前言StateFlow会对新的值和旧的值进行equality判断，如果返回true，就不会用这个new value去更新old value，就不会发送这个值。
这个equality判断会发生在 发送端 和 接收端。
发送端一般有两种发送方式，如下所示
1234567891011121314151617181920212223fun main() = runBlocking &#123;  val mutableStateFlow = MutableStateFlow&lt;Person&gt;(Person())    launch &#123;        delay(1000)        println(&quot;用update的方式更改值（equal返回true）&quot;)        mutableStateFlow.update &#123;// 1 CAS校验 + 相等性判断，推荐使用            Person(&quot;&quot;, 0)        &#125;        delay(1000)        println(&quot ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/" title="select优先选择第一个可用的clause"><img class="post-bg" src="https://i.pinimg.com/564x/a5/11/e2/a511e2a67cd46781690060abbed5f6c3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="select优先选择第一个可用的clause"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/" title="select优先选择第一个可用的clause">select优先选择第一个可用的clause</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-03T12:44:48.000Z" title="发表于 2023-03-03 20:44:48">2023-03-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-03T13:43:12.790Z" title="更新于 2023-03-03 21:43:12">2023-03-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/#post-comment"><span class="waline-comment-count" id="/2023/03/03/select%E4%BC%98%E5%85%88%E9%80%89%E6%8B%A9%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%94%A8%E7%9A%84clause/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">when more than one clause are ready, select will choose the first one. Pls take a look at the code below:
12345678910111213141516171819202122232425262728293031323334suspend fun selectAorB(a: ReceiveChannel&lt;String&gt;, b: ReceiveChannel&lt;String&gt;): String =    select&lt;String&gt; &#123;        a.onReceiveCatching &#123; it -&gt;            val value = it.getOrNull()            if (value != null) &#123;                &quot;a -&gt; &#x27;$value&#x27;&quot;            &#125; else &#123;     ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/" title="channelFlow的并发emit"><img class="post-bg" src="https://i.pinimg.com/564x/d6/c3/98/d6c39875f9444cce60c3f5be676abdbf.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="channelFlow的并发emit"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/" title="channelFlow的并发emit">channelFlow的并发emit</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-02T12:21:18.000Z" title="发表于 2023-03-02 20:21:18">2023-03-02</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-05T11:37:05.654Z" title="更新于 2023-03-05 19:37:05">2023-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Kotlin/">Kotlin</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/">协程</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/Flow/">Flow</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a href="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/#post-comment"><span class="waline-comment-count" id="/2023/03/02/channelFlow%E7%9A%84%E5%B9%B6%E5%8F%91emit/"><i class="fa-solid fa-spinner fa-spin"></i></span></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">12345678910111213fun main() = runBlocking &#123;    channelFlow&lt;Int&gt; &#123;        withContext(Dispatchers.IO) &#123;            send(1)// send而不是emit        &#125;        withContext(Dispatchers.Default) &#123;            send(2)        &#125;    &#125;.map &#123; it * 2 &#125;        .collect &#123;            println(it)        &#125;&#125;

使用channelFlow可以在不同的上下文中发射值。
用 flow&#123;&#125; 构建器则不行，代码如下
123456789101112fun main() = runBlocking &#123;    flow&lt;Int&gt; &#123;        withCont ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s3.bmp.ovh/imgs/2023/02/05/c03b34cc88fbcefd.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JeckOnly</div><div class="author-info__description">Live and so on</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/JeckOnly"><i class="fab fa-github"></i><span>Click here</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/JeckOnly" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://github.com/JeckOnly/passage" target="_blank" title="以前写博客的地方"><i class="far fa-folder-open"></i></a><a class="social-icon" href="https://space.bilibili.com/287002331" target="_blank" title="bilibili"><i class="fab fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">null了哦</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/11/09/%E5%85%B3%E4%BA%8E%E3%80%8A%E5%B9%B3%E5%87%A1%E7%9A%84%E4%B8%96%E7%95%8C%E3%80%8B/" title="关于《平凡的世界》"><img src="https://www.xinyubaike.com/uploadfile/images/63341a3c745ee1664358972.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于《平凡的世界》"/></a><div class="content"><a class="title" href="/2023/11/09/%E5%85%B3%E4%BA%8E%E3%80%8A%E5%B9%B3%E5%87%A1%E7%9A%84%E4%B8%96%E7%95%8C%E3%80%8B/" title="关于《平凡的世界》">关于《平凡的世界》</a><time datetime="2023-11-09T15:30:08.000Z" title="发表于 2023-11-09 23:30:08">2023-11-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/22/%E4%B8%8D%E9%9C%80%E8%A6%81%E9%A3%8E%E6%89%87%E7%9A%84%E6%97%A5%E5%AD%90/" title="不需要风扇的日子"><img src="https://i.pinimg.com/564x/0e/cf/ec/0ecfeca2b25e2ffd60b449f9e69dd1f3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="不需要风扇的日子"/></a><div class="content"><a class="title" href="/2023/10/22/%E4%B8%8D%E9%9C%80%E8%A6%81%E9%A3%8E%E6%89%87%E7%9A%84%E6%97%A5%E5%AD%90/" title="不需要风扇的日子">不需要风扇的日子</a><time datetime="2023-10-22T05:24:06.000Z" title="发表于 2023-10-22 13:24:06">2023-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/08/10%E6%9C%88%E4%BB%BD%E4%BB%8A%E5%A4%A9%E8%BD%AC%E5%87%89/" title="10月份今天转凉"><img src="https://i.pinimg.com/564x/d7/a9/c8/d7a9c81394c4548daf9b377b2d411674.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="10月份今天转凉"/></a><div class="content"><a class="title" href="/2023/10/08/10%E6%9C%88%E4%BB%BD%E4%BB%8A%E5%A4%A9%E8%BD%AC%E5%87%89/" title="10月份今天转凉">10月份今天转凉</a><time datetime="2023-10-08T14:56:08.000Z" title="发表于 2023-10-08 22:56:08">2023-10-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/19/%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/" title="简单记录"><img src="https://i.pinimg.com/564x/f0/f0/b1/f0f0b1bb14998714f405a5bf02e00ad7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="简单记录"/></a><div class="content"><a class="title" href="/2023/06/19/%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95/" title="简单记录">简单记录</a><time datetime="2023-06-19T15:35:52.000Z" title="发表于 2023-06-19 23:35:52">2023-06-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/09/%E5%85%B3%E4%BA%8E%E7%8E%B0%E4%BB%A3%E7%94%9F%E8%82%B2%E9%97%AE%E9%A2%98%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/" title="关于现代生育问题的一些思考"><img src="https://i.pinimg.com/564x/a0/57/ed/a057ed9d509026ffa457b630f1e919ff.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于现代生育问题的一些思考"/></a><div class="content"><a class="title" href="/2023/04/09/%E5%85%B3%E4%BA%8E%E7%8E%B0%E4%BB%A3%E7%94%9F%E8%82%B2%E9%97%AE%E9%A2%98%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/" title="关于现代生育问题的一些思考">关于现代生育问题的一些思考</a><time datetime="2023-04-09T09:19:14.000Z" title="发表于 2023-04-09 17:19:14">2023-04-09</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E5%BA%94%E7%94%A8%E6%95%B0%E6%8D%AE%E5%92%8C%E6%96%87%E4%BB%B6/"><span class="card-category-list-name">应用数据和文件</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E6%9E%B6%E6%9E%84/"><span class="card-category-list-name">架构</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6/"><span class="card-category-list-name">架构组件</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Gradle/"><span class="card-category-list-name">Gradle</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E5%B9%B6%E5%8F%91/"><span class="card-category-list-name">并发</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/"><span class="card-category-list-name">Jetpack</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/Compose/"><span class="card-category-list-name">Compose</span><span class="card-category-list-count">2</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/Compose/Flow%E7%9B%B8%E5%85%B3/"><span class="card-category-list-name">Flow相关</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Jetpack/Compose/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6/"><span class="card-category-list-name">自定义组件</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/"><span class="card-category-list-name">Kotlin</span><span class="card-category-list-count">14</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/"><span class="card-category-list-name">协程</span><span class="card-category-list-count">12</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E5%8D%8F%E7%A8%8B/Flow/"><span class="card-category-list-name">Flow</span><span class="card-category-list-count">4</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">类型系统</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kotlin/%E8%AF%AD%E6%B3%95/"><span class="card-category-list-name">语法</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/leetcode/"><span class="card-category-list-name">leetcode</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/life/"><span class="card-category-list-name">life</span><span class="card-category-list-count">14</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BA%93/"><span class="card-category-list-name">库</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BA%93/Moshi/"><span class="card-category-list-name">Moshi</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%B8%B8%E6%88%8F/"><span class="card-category-list-name">游戏</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%B5%E5%BD%B1/"><span class="card-category-list-name">电影</span><span class="card-category-list-count">11</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E6%84%9F%E6%83%B3/"><span class="card-category-list-name">编程感想</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/"><span class="card-category-list-name">读书</span><span class="card-category-list-count">5</span></a></li>
            </ul></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">36</span></a></li></ul></div><div class="card-widget card-map"><div class="card-content"><div class="item-headline"><i class="fa fa-map-marker" aria-hidden="true"></i><span>访客</span></div><a target="_blank" rel="noopener" href="https://clustrmaps.com/site/1bswl"><img src="//www.clustrmaps.com/map_v2.png?d=7LOJqlmkafuJYaI8Avy1X9bjNH8SWxAFgbzbu8B9Dp4&amp;cl=ffffff"/></a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">58</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-12-31T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">46.3k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-11-12T09:48:59.383Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By JeckOnly</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">路漫漫其修远兮</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  function loadWaline () {
    function initWaline () {
      let initData = {
        el: null,
        serverURL: 'https://vercel-mu-opal.vercel.app',
        comment: true
      }
      const waline = Waline.init(initData)
    }

    if (typeof Waline === 'object') initWaline() 
    else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(initWaline)
  }

  window.pjax ? loadWaline() : window.addEventListener('load', loadWaline)
})()</script><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["年青和健康，最易追悔莫及"])
  } else {
    document.getElementById("subtitle").innerHTML = '年青和健康，最易追悔莫及'
  }
}
typedJSFn.run(subtitleType)</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (false) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const loadWaline = () => {
      Waline.RecentComments({
        serverURL: 'https://vercel-mu-opal.vercel.app',
        count: 6
      }).then(({comments}) => {
        const walineArray = comments.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.insertedAt,
          }
        })
        saveToLocal.set('waline-newest-comments', JSON.stringify(walineArray), 10/(60*24))
        generateHtml(walineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
    }

    if (typeof Waline === 'object') loadWaline()
    else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(loadWaline)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('waline-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="理性,愉悦,安宁" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>